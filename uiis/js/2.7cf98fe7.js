(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"3d43":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"container"},[t.loading?a("div"):a("div",{staticClass:"q-pa-sm"},[a("div",{staticClass:"row justify-center q-mb-md"},[a("h6",{staticClass:"q-mb-sm"},[t._v("\n        "+t._s(t.info.courseID+" - "+t.info.courseTitle)+"\n      ")])]),a("div",[a("div",{staticClass:"row justify-center"},[a("q-btn-toggle",{attrs:{glossy:"",options:t.labels,"no-caps":""},model:{value:t.slide,callback:function(e){t.slide=e},expression:"slide"}})],1),a("q-carousel",{attrs:{"transition-prev":"slide-right","transition-next":"slide-left",animated:"",draggable:"false","control-color":"primary",height:"100%"},model:{value:t.slide,callback:function(e){t.slide=e},expression:"slide"}},[t._l(t.allTeacherInfo,(function(e,s){return a("q-carousel-slide",{key:s,staticClass:"column no-wrap flex-center",attrs:{name:e.fakeTeacherID}},[a("div",{staticClass:"text-center"},[a("q-table",{staticClass:"table",attrs:{title:e.teacherName,data:e.deho,columns:e.mathas,separator:"cell","row-key":"studentID","selected-rows-label":t.getSelectedString,selection:t.info.hasForwarded?void 0:"multiple",selected:t.selected,pagination:t.initialPagination,"table-header-class":"bg-primary text-white"},on:{"update:selected":function(e){t.selected=e}},scopedSlots:t._u([{key:"body-cell",fn:function(s){return[a("q-td",{class:t.getTeacherRowClass(e.fakeTeacherID,s.row.studentID),attrs:{props:s}},[t._v("\n                  "+t._s(s.value)+"\n                ")])]}}],null,!0)}),t.info.hasForwarded?t._e():a("IssueForm",{attrs:{details:e.issueDetails}})],1)])})),t._l(t.allTfInfo,(function(e,s){return a("q-carousel-slide",{key:s,staticClass:"column no-wrap flex-center",attrs:{name:e.fakeExaminerID}},[a("div",{staticClass:"text-center"},[a("q-table",{staticClass:"table",attrs:{title:e.examinerName,data:e.deho,columns:e.mathas,separator:"cell",padding:"","row-key":"studentID","selected-rows-label":t.getSelectedString,selection:t.info.hasForwarded?void 0:"multiple",selected:t.selected,pagination:t.initialPagination,"table-header-class":"bg-primary text-white"},on:{"update:selected":function(e){t.selected=e}},scopedSlots:t._u([{key:"body-cell",fn:function(s){return[a("q-td",{class:t.getExaminerRowClass(e.fakeExaminerID,s.row.studentID),attrs:{props:s}},[t._v("\n                  "+t._s(s.value)+"\n                ")])]}}],null,!0)}),t.info.hasForwarded?t._e():a("IssueForm",{attrs:{details:e.issueDetails}})],1)])})),a("q-carousel-slide",{staticClass:"column no-wrap flex-center",attrs:{name:"full-results"}},[a("div",{staticClass:"text-center"},[a("q-table",{staticClass:"table",attrs:{title:"Consolidated Results",data:t.fullResultsInfo.deho,columns:t.fullResultsInfo.mathas,separator:"cell",padding:"","row-key":"studentID",pagination:t.initialPagination,"table-header-class":"bg-primary text-white"}})],1)]),a("q-carousel-slide",{staticClass:"column no-wrap flex-center",attrs:{name:"statistics"}},[a("div",{staticClass:"text-center"},[a("q-table",{staticClass:"table",attrs:{title:"Statistics",data:t.statisticsInfo.deho,columns:t.statisticsInfo.mathas,separator:"cell",padding:"","row-key":"grade",pagination:t.gradePagination,"table-header-class":"bg-primary text-white"}})],1)])],2),"eco"!=t.ke?a("div",{staticClass:"row justify-center"},[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:!(!t.canEdit||t.hasForwarded||t.barse),expression:"!(!canEdit || hasForwarded || barse)"}],staticClass:"submit-btn q-mt-sm",attrs:{color:"primary",label:t.forwardLabel,"no-caps":""},on:{click:function(e){t.submitting=!0}}}),a("q-dialog",{model:{value:t.submitting,callback:function(e){t.submitting=e},expression:"submitting"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[t._v("Are you sure to submit?")])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"yes",color:"primary"},on:{click:t.forwardResult}})],1)],1)],1)],1):t._e()],1)])])},n=[],l=a("ded3"),i=a.n(l),r=(a("ddb0"),a("5319"),a("2f62")),o=a("758b"),d=(a("bc78"),{name:"ScrutinizerTable",data(){return{submitting:!1,canEdit:!0,slide:null,loading:!0,selected:[],initialPagination:{sortBy:"studentID",descending:!1,page:1,rowsPerPage:null},gradePagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:10},barse:!1}},props:{ke:{type:String,required:!0},initLabel:{type:String,required:!1}},components:{IssueForm:()=>Promise.all([a.e(0),a.e(6)]).then(a.bind(null,"103e"))},methods:i()(i()({setBarse(t){this.barse=t},getSelectedString(){return 0===this.selected.length?"":`${this.selected.length} student${this.selected.length>1?"s":""} selected`}},Object(r["c"])("scrutinizer",["fillSingleCourse"])),{},{async forwardResult(){this.canEdit=!1;const t=this.$q.notify({spinner:!0,message:"Forwarding",group:!1,timeout:0,position:"bottom-left"});await o["b"].put(`/teacher/${this.ke}/${this.info.courseID}/${this.currentSession}/approve`),this.$store.commit("scrutinizer/mutHasForwarded"),t({icon:"done",message:`Result Forwarded to ${this.porerjon()}`,position:"bottom-left",spinner:!1,timeout:1500})},porerjon(){return"head"===this.ke?"ECO":"scrutinizer"===this.ke?"Gradesheet Preparer":"internal"===this.ke?"Department Head":"Janina"},getTeacherRowClass(t,e){const a=t.slice(8),s=this.info.teacherColored.find((t=>t.teacher===a));return s.unchangedList.includes(e)?"bhul":s.updatedList.includes(e)?"thik":""},getExaminerRowClass(t,e){const a=t.split("-")[2],s=t.split("-")[1],n=this.info.examinerColored.find((t=>t.teacher===a&&s===t.part));return n.unchangedList.includes(e)?"bhul":n.updatedList.includes(e)?"thik":""},async toiri(){if(this.loading=!0,this.$store.commit("scrutinizer/mutKe",this.ke),this.$route.params.courseID){this.$store.commit("scrutinizer/mutCurCourse",this.$route.params.courseID),this.$q.loading.show({delay:100});try{await this.$store.dispatch("scrutinizer/fillSingleCourse")}catch(t){console.log(t)}this.loading=!1,this.$q.loading.hide(),this.labels.length>0&&(this.initLabel?this.slide=this.initLabel:this.slide=this.labels[0]["value"]),this.initialPagination.rowsPerPage=this.info.students.length}}}),computed:i()(i()({},Object(r["d"])("scrutinizer",{info:"currentCourseInfo",attTotal:"attTotal",attFullTotal:"attFullTotal",attStudent:"attStudent",attFullStudent:"attFullStudent",evalTotal:"evalTotal",evalFullTotal:"evalFullTotal",evalStudent:"evalStudent",evalFullStudent:"evalFullStudent",tfTotal:"tfTotal",tfFullTotalPerPart:"tfFullTotalPerPart",tfStudent:"tfStudent",tfFullStudent:"tfFullStudent",fullTotal:"fullTotal",fullStudent:"fullStudent",percentStudent:"percentStudent",gpaStudent:"gpaStudent",gradeStudent:"gradeStudent",gradeList:"gradeList",countGrade:"countGrade",percentGrade:"percentGrade",totalStudents:"totalStudents",hasForwarded:"hasForwarded",currentSession:"currentSession"})),{},{forwardLabel(){return`Forward to ${this.porerjon()}`},allCompleted(){for(const t of this.info.students){for(const e of this.info.teachers){if("NA"===this.attStudent(e.teacher,t.student.id))return!1;for(const a of e.evalDescriptions)if("NA"===this.evalStudent(e.teacher,a.evalID,t.student.id))return!1}for(const e of this.info.examiners)if("NA"===this.tfStudent(e.teacher,e.part,t.student.id))return!1}return!0},allTeacherInfo(){const t=[];for(const e of this.info.teachers){const a=[],s=[],n={name:"studentID",label:"Student ID",field:"studentID",sortable:!0,sort:(t,e)=>parseInt(t.substring(1),10)-parseInt(e.substring(1)),align:"left"};a.push(n);const l={name:"attendance",label:`Attendance Count (${this.attTotal(e.teacher)})`,field:"attendance",sortable:!0,align:"left"};a.push(l);for(const t of e.evalDescriptions){const s={name:`eval_${t.evalID}`,label:`Eval-${t.evalID} (${this.evalTotal(e.teacher,t.evalID)})`,field:`eval_${t.evalID}`,sortable:!0,align:"left"};a.push(s)}for(const t of this.info.students){const a={};a["studentID"]=t.student.id,a["attendance"]=this.attStudent(e.teacher,t.student.id);for(const s of e.evalDescriptions)a[`eval_${s.evalID}`]=this.evalStudent(e.teacher,s.evalID,t.student.id);s.push(a)}const i=this.info.names[e.teacher],r="teacher-"+e.teacher,o={courseID:this.info.courseID,evalType:"course-eval",part:e.part,evalOwner:e.teacher,evalOwnerName:this.info.names[e.teacher],allStudentSelected:this.selected.length===this.info.students.length,students:this.selected.map((t=>t.studentID)),teachers:["t1","t2"]};t.push({fakeTeacherID:r,teacherName:i,mathas:a,deho:s,issueDetails:o})}return t},allTfInfo(){const t=[];for(const e of this.info.examiners){const a=[],s=[],n={name:"studentID",label:"Student ID",field:"studentID",sortable:!0,sort:(t,e)=>parseInt(t.substring(1),10)-parseInt(e.substring(1)),align:"left"};a.push(n);const l={name:"mark",label:`Mark (${this.tfTotal(e.teacher,e.part)})`,field:"mark",sortable:!0,align:"left"};a.push(l);for(const t of this.info.students){const a={};a["studentID"]=t.student.id,a["mark"]=this.tfStudent(e.teacher,e.part,t.student.id),s.push(a)}const i=this.info.names[e.teacher],r="examiner-"+e.part+"-"+e.teacher,o={courseID:this.info.courseID,evalType:"term-final-eval",part:e.part,evalOwner:e.teacher,evalOwnerName:this.info.names[e.teacher],allStudentSelected:this.selected.length===this.info.students.length,students:this.selected.map((t=>t.studentID)),teachers:["t1","t2"]};t.push({fakeExaminerID:r,examinerName:i,mathas:a,deho:s,issueDetails:o})}return t},fullResultsInfo(){const t=[],e=[],a={name:"studentID",label:"Student ID",field:"studentID",sortable:!0,sort:(t,e)=>parseInt(t.substring(1),10)-parseInt(e.substring(1)),align:"left"};t.push(a);const s={name:"attendance",label:`Attendance (${this.attFullTotal})`,field:"attendance",sortable:!0,align:"left"};t.push(s);const n={name:"evals",label:`Evaluations (${this.evalFullTotal})`,field:"evals",sortable:!0,align:"left"};t.push(n);for(const i of this.info.examiners){const e={name:`tf - ${i.part}`,label:`TF - Part ${i.part} (${this.tfFullTotalPerPart})`,field:`tf - ${i.part}`,sortable:!0,align:"left"};t.push(e)}const l={name:"total",label:`Total (${this.fullTotal})`,field:"total",sortable:!0,align:"left"};t.push(l),t.push({name:"percentage",label:"% (100)",field:"percentage",sortable:!0,align:"left"}),t.push({name:"gpa",label:"GPA",field:"gpa",sortable:!0,align:"left"}),t.push({name:"grade",label:"Grade",field:"grade",sortable:!0,align:"left"});for(const i of this.info.students){const t={};t["studentID"]=i.student.id,t["attendance"]=this.attFullStudent(i.student.id),t["evals"]=this.evalFullStudent(i.student.id);for(const e of i.termFinalMarks)t[`tf - ${e.part}`]=this.tfFullStudent(e.part,i.student.id);t["total"]=this.fullStudent(i.student.id),t["percentage"]=this.percentStudent(i.student.id),t["gpa"]=this.gpaStudent(i.student.id),t["grade"]=this.gradeStudent(i.student.id),e.push(t)}return{mathas:t,deho:e}},statisticsInfo(){const t=[],e=[];return t.push({name:"gpa",label:"GPA",field:"gpa",sortable:!0,align:"left"}),t.push({name:"grade",label:"Grade",field:"grade",sortable:!0,align:"left"}),t.push({name:"numofstu",label:`Number of Students (${this.totalStudents})`,field:"numofstu",sortable:!0,align:"left"}),t.push({name:"percentage",label:"Percentage (100)",field:"percentage",sortable:!0,align:"left"}),this.gradeList.forEach((t=>{const a={gpa:t.gpa,grade:t.grade,numofstu:this.countGrade(t.grade),percentage:this.percentGrade(t.grade)};e.push(a)})),{mathas:t,deho:e}},labels(){const t=this.info.teachers.map((t=>({label:this.info.names[t.teacher],value:"teacher-"+t.teacher}))),e=this.info.examiners.map((t=>({label:`Term Final - Part ${t.part}`,value:"examiner-"+t.part+"-"+t.teacher})));return t.push(...e),t.push({label:"Full Results",value:"full-results"}),t.push({label:"Statistics",value:"statistics"}),t}}),watch:{async"$route.params"(t,e){t.courseID!==e.courseID&&await this.toiri()},slide(t){this.selected=[],this.$router.replace({name:`${this.ke}-course-page`,params:{courseID:this.info.courseID},query:{initLabel:this.slide}}).catch((()=>{}))}},async created(){await this.toiri()}}),u=d,c=(a("e024"),a("2877")),h=a("9989"),f=a("6a67"),p=a("880c"),m=a("62cd"),g=a("eaac"),b=a("db86"),v=a("9c40"),I=a("24e8"),w=a("f09f"),S=a("a370"),D=a("4b7e"),C=a("7f67"),T=a("eebe"),y=a.n(T),F=Object(c["a"])(u,s,n,!1,null,"4e189124",null);e["default"]=F.exports;y()(F,"components",{QPage:h["a"],QBtnToggle:f["a"],QCarousel:p["a"],QCarouselSlide:m["a"],QTable:g["a"],QTd:b["a"],QBtn:v["a"],QDialog:I["a"],QCard:w["a"],QCardSection:S["a"],QCardActions:D["a"]}),y()(F,"directives",{ClosePopup:C["a"]})},af9c:function(t,e,a){},e024:function(t,e,a){"use strict";a("af9c")}}]);