(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[44],{a472:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",{attrs:{padding:""}},[i("div",{staticClass:"text-h5 q-mb-md"},[t._v("\n    Slots\n  ")]),t.dataLoading?t._e():i("q-form",{on:{submit:t.updateSlots,reset:t.resetForm}},[t._l(t.slots,(function(e,a){return i("div",{key:a,staticClass:"row q-col-gutter-md q-mb-sm"},[i("q-input",{staticClass:"col-3",attrs:{label:"Slot No",outlined:"","stack-label":"",readonly:e.old,rules:[function(){return!!e.id||"Please Enter Slot No"}]},model:{value:e.id,callback:function(i){t.$set(e,"id",i)},expression:"slot.id"}}),i("q-input",{staticClass:"col-4",attrs:{label:"Starting Time","stack-label":"",type:"time",rules:[function(){return!!e.startingTime||"Please Enter Starting Time"}],outlined:"",readonly:e.viewing},model:{value:e.startingTime,callback:function(i){t.$set(e,"startingTime",i)},expression:"slot.startingTime"}}),i("q-input",{staticClass:"col-4",attrs:{label:"Duration","stack-label":"",type:"number",min:"0",step:"5",suffix:"minutes",outlined:"",readonly:e.viewing,rules:[function(){return!!e.duration||"Please Enter Duration"}]},model:{value:e.duration,callback:function(i){t.$set(e,"duration",i)},expression:"slot.duration"}}),i("div",{staticClass:"col-1"},[e.old?t.canUpdate?i("q-btn",{attrs:{icon:e.viewing?"edit":"visibility",color:e.viewing?"primary":"black",flat:"",dense:""},on:{click:function(t){e.viewing=!e.viewing}}}):t._e():i("q-btn",{attrs:{icon:"delete",color:"primary",flat:"",dense:""},on:{click:function(e){return t.localRemoveSlot(a)}}})],1)],1)})),t.canCreate?i("div",{staticClass:"row"},[i("div",{staticClass:"col-3"}),i("q-btn",{staticClass:"col-6",attrs:{color:"primary",outline:"",icon:"add",ripple:!1},on:{click:t.localAddSlot}})],1):t._e(),i("div",{staticClass:"col-12 q-mt-lg"},[i("q-btn",{attrs:{label:"Update",type:"submit",color:"primary",unelevated:""}}),i("q-btn",{attrs:{label:"Reset",type:"reset",color:"primary",flat:""}})],1)],2),i("q-inner-loading",{attrs:{showing:t.dataLoading}})],1)},s=[],l=i("ded3"),n=i.n(l),o=i("dce8"),r=i("a796"),d=i("7338"),c=i("88f5"),u=i("2f62"),m=i("c9d9"),g={name:"SlotManagement",mixins:[d["a"],c["a"]],data(){return{slots:[],slotList:[],dataLoading:!1}},computed:n()(n()({},Object(u["d"])(["userHasPrivilege"])),{},{canCreate(){return this.userHasPrivilege(m["d"].SLOT_CREATION)},canUpdate(){return this.userHasPrivilege(m["d"].SLOT_UPDATE)}}),methods:{fetchSlots(){this.dataLoading=!0,Object(o["a"])("/slot/list",null,"Slots").then((t=>{this.dataLoading=!1,this.slotList=t.data,this.resetForm()})).catch((()=>{this.dataLoading=!1}))},localAddSlot(){this.slots.push({id:null,startingTime:null,duration:null,viewing:!1,old:!1})},localRemoveSlot(t){this.slots.splice(t,1)},updateSlots(){this.slots.forEach(((t,e)=>{if(t.old){const i=this.slotList[e];i.startingTime===Object(r["b"])(t.startingTime)&&i.duration===parseInt(t.duration)||this.editSlot(t)}else this.createSlot(t)})),this.fetchSlots()},createSlot(t){this.callCreateApi("/slot/create",{id:t.id,startingTime:Object(r["b"])(t.startingTime),duration:t.duration},`Slot ${t.id}`)},editSlot(t){this.callEditApi("/slot/update/"+t.id,{startingTime:Object(r["b"])(t.startingTime),duration:t.duration},`Slot ${t.id}`)},resetForm(){this.slots=this.slotList.map((t=>({id:t.id,startingTime:Object(r["d"])(t.startingTime),duration:t.duration,viewing:!0,old:!0})))}},created(){this.fetchSlots()}},p=g,b=i("2877"),h=i("9989"),f=i("0378"),v=i("27f9"),S=i("9c40"),T=i("74f7"),w=i("eebe"),q=i.n(w),y=Object(b["a"])(p,a,s,!1,null,null,null);e["default"]=y.exports;q()(y,"components",{QPage:h["a"],QForm:f["a"],QInput:v["a"],QBtn:S["a"],QInnerLoading:T["a"]})}}]);