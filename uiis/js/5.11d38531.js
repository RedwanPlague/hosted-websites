(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"1b25":function(e,t,s){},4009:function(e,t){const s=e=>{const t=e.toLocaleString("default",{month:"long"}),s=e.getUTCDate(),i=e.getUTCFullYear();return t+" "+s+", "+i};e.exports={parseIssueDate:s}},"6bc9":function(e,t,s){},"866a":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.pageLoaded,expression:"pageLoaded"}],staticClass:"container"},[s("div",{staticClass:"issue-header"},[s("div",{staticClass:"issue-header-row"},[s("h4",[e._v(e._s(e.issueDetails.title))]),e.issueDetails.courseSession?s("q-btn",{staticStyle:{height:"35px","margin-top":"52px","margin-left":"20px"},attrs:{label:e.issueDetails.courseSession.course.courseID+": "+e.issueDetails.courseSession.course.title,"icon-right":"mdi-open-in-new",color:"teal","text-color":"white","no-caps":""},on:{click:e.courseChipClicked}}):e._e()],1),s("div",{staticClass:"issue-header-row"},["unresolved"===e.issueDetails.status?s("q-chip",{staticClass:"bg-deep-orange-9",staticStyle:{"margin-top":"20px"},attrs:{"text-color":"white",icon:"error",size:"15px"}},[e._v("Unresolved")]):e._e(),"resolved"===e.issueDetails.status?s("q-chip",{staticClass:"bg-positive",staticStyle:{"margin-top":"20px"},attrs:{"text-color":"white",icon:"check_circle",size:"15px"}},[e._v("Resolved")]):e._e()],1),s("div",{staticClass:"issue-header-row",staticStyle:{"margin-top":"10px"}},[e._m(0),e._l(e.issueDetails.students,(function(t){return s("q-chip",{key:t,attrs:{color:"black","text-color":"white",square:"",outline:""}},[e._v(e._s(t))])}))],2),s("div",{staticClass:"issue-header-row space-between",staticStyle:{"margin-top":"10px"}},[e.issueDetails.teachers?s("div",[e._m(1),e._l(e.issueDetails.teachers,(function(t){return s("q-chip",{key:t._id,attrs:{color:"black","text-color":"white",square:"",outline:""}},[e._v(" "+e._s(t.name))])}))],2):e._e(),e.issueDetails.issueCreator&&e.issueDetails.issueCreator._id===e.user.id?s("q-btn",{staticClass:"resolve-btn",attrs:{disable:e.buttonLoading,color:"teal",label:e.resolveButtonText,icon:e.resolveButtonIcon,"no-caps":""},on:{click:e.resolveClicked}}):e._e()],1)]),s("q-separator",{staticClass:"bg-blue-2 separator",attrs:{inset:"true"}}),e._l(e.issueDetails.posts,(function(t,i){return s("div",{key:i},["activity"===t.postType?s("div",[s("user-activity",{attrs:{"image-link":t.author.display_image_link,"user-name":t.author.name,date:t.date,activity:t.description}})],1):e._e(),"comment"===t.postType?s("div",[s("user-comment",{attrs:{"image-link":t.author.display_image_link,"user-name":t.author.name,date:t.date,comment:t.description}})],1):e._e()])})),s("editor",{attrs:{imageLink:e.user.display_image_link},on:{submitClicked:e.addComment}}),s("q-dialog",{attrs:{persistent:""},model:{value:e.resolveFlag,callback:function(t){e.resolveFlag=t},expression:"resolveFlag"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center"},[s("span",{staticClass:"q-ml-sm"},[e._v("Are you sure you want to "+e._s(e.resolveButtonText.toLowerCase())+"?")])]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:e.resolveButtonText,color:"primary"},on:{click:e.submitButtonClicked}})],1)],1)],1)],2)},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header-col-1"},[s("b",[e._v("Students:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"header-col-1"},[s("b",[e._v("Current Audience:")])])}],o=s("ded3"),r=s.n(o),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container-row"},[s("div",{staticClass:"img-left"},[s("img",{attrs:{src:e.imageLink,width:"40",height:"40",alt:e.userName}})]),s("div",{staticClass:"text-bubble"},[s("div",{staticClass:"bubble-top-slot"},[s("span",{staticClass:"top-icon"},[s("q-icon",{staticStyle:{"font-size":"20px"},attrs:{name:"message"}})],1),s("span",[s("b",[e._v(e._s(e.userName))]),e._v(" commented on "+e._s(e.convertedDate))])]),s("div",{staticClass:"bubble-down-slot",domProps:{innerHTML:e._s(e.comment)}})])])},l=[],c=s("4009"),u={name:"Comment",props:{imageLink:String,userName:String,date:String,comment:String},created(){this.date&&(this.convertedDate=Object(c["parseIssueDate"])(new Date(this.date)))},data(){return{convertedDate:""}}},d=u,p=(s("de87"),s("2877")),m=s("0016"),h=s("eebe"),v=s.n(h),b=Object(p["a"])(d,n,l,!1,null,"3de6ab30",null),g=b.exports;v()(b,"components",{QIcon:m["a"]});var _=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container-row"},[s("div",{staticClass:"img-left"},[s("img",{attrs:{src:e.imageLink,width:"40",height:"40",alt:e.userName}})]),s("div",{staticClass:"text-bubble"},[s("div",{staticClass:"bubble-single-slot"},[s("span",{staticClass:"top-icon"},[s("q-icon",{staticStyle:{"font-size":"20px"},attrs:{name:e.topSlotIcon}})],1),s("span",[s("b",[e._v(e._s(e.userName))])]),e._v("Â \n      "),s("span",{domProps:{innerHTML:e._s(this.parsedActivity)}}),s("span",[e._v(" on "+e._s(e.convertedDate))])])])])},f=[],C={name:"Activity",props:{imageLink:String,userName:String,date:String,activity:String},created(){this.date&&(this.convertedDate=Object(c["parseIssueDate"])(new Date(this.date))),this.parsedActivity=this.activity;const e=this.activity.split(" ")[0];if("has"===e||"updated"===e){this.topSlotIcon="edit";const e=this.activity.lastIndexOf(" ");this.parsedActivity=this.activity.substr(0,e)+"<b>"+this.activity.substr(e)+"</b>"}else"reopened"===e?this.topSlotIcon="report_gmailerrorred":"created"===e?this.topSlotIcon="note_add":"closed"===e&&(this.topSlotIcon="done_all")},data(){return{topSlotIcon:"",parsedActivity:"",convertedDate:""}}},D=C,w=(s("f2a2"),Object(p["a"])(D,_,f,!1,null,"6a17f301",null)),x=w.exports;v()(w,"components",{QIcon:m["a"]});var y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container-row"},[s("div",{staticClass:"img-left"},[s("img",{attrs:{src:e.imageLink,width:"40",height:"40",alt:"user"}})]),s("div",{staticClass:"text-bubble button-row"},[s("div",{staticClass:"bubble-top-slot"},[e._v("Add a comment:")]),s("div",{staticClass:"bubble-down-slot"},[s("q-editor",{staticClass:"text-editor",attrs:{"toolbar-toggle-color":"blue","min-height":"5rem",placeholder:"Add a comment..."},model:{value:e.editorText,callback:function(t){e.editorText=t},expression:"editorText"}})],1),s("q-btn",{staticStyle:{"margin-left":"900px"},attrs:{color:"blue-4",label:"Comment","no-caps":"",disable:!e.editorText},on:{click:e.submitButtonClicked}})],1)])},k=[],S={name:"Editor",props:{imageLink:String},methods:{submitButtonClicked(e){this.$emit("submitClicked",this.editorText),this.editorText=""}},data(){return{editorText:"",items:[{value:"SlowDecay",label:"SlowDecay"},{value:"MahirSez",label:"MahirSez"}]}}},I=S,q=(s("92b5"),s("d66b")),L=s("9c40"),$=Object(p["a"])(I,y,k,!1,null,"1cf0613a",null),T=$.exports;v()($,"components",{QEditor:q["a"],QBtn:L["a"]});var B=s("2f62");const{mapActions:A}=Object(B["a"])("issues");var O={name:"IssuePage.vue",components:{"user-comment":g,"user-activity":x,editor:T},computed:r()(r()({},Object(B["d"])("issues",{issueDetails:"issueDetails"})),Object(B["d"])(["user"])),async created(){this.pageLoaded=!1,this.$q.loading.show({delay:100,message:"Loading...",messageColor:"white"}),await this.fetchIssueDetails({issueID:this.$route.params.issueID}),this.setPageVariables(),this.$q.loading.hide(),this.pageLoaded=!0},watch:{async"$route.params"(e,t){this.$route.params.issueID&&(await this.fetchIssueDetails({issueID:this.$route.params.issueID}),this.setPageVariables())}},methods:r()(r()({},A(["fetchIssueDetails","sendComment","changeIssueStatus"])),{},{courseChipClicked(e){if(console.log(this.issueDetails.role),"course"===this.issueDetails.role){const e=this.$router.resolve({name:"course_page",params:{courseID:this.issueDetails.courseSession.course.courseID,courseSession:this.issueDetails.courseSession.session}});window.open(e.href,"_blank")}else if("examiner"===this.issueDetails.role){const e=this.$router.resolve({name:"examiner-evaluation-page",params:{courseID:this.issueDetails.courseSession.course.courseID,part:this.issueDetails.part}});window.open(e.href,"_blank")}else if(this.issueDetails.role){const e="-"===this.issueDetails.part?`teacher-${this.issueDetails.evalOwner._id}`:`examiner-${this.issueDetails.part}-${this.issueDetails.evalOwner._id}`,t=this.$router.resolve({name:`${this.issueDetails.role}-course-page`,params:{courseID:this.issueDetails.courseSession.course.courseID},query:{initLabel:e}});window.open(t.href,"_blank")}else console.log(this.issueDetails.role),console.log("Not found")},setPageVariables(){"unresolved"===this.issueDetails.status?(this.resolveButtonIcon="check_circle",this.resolveButtonText="Mark As Resolved"):(this.resolveButtonText="Reopen Issue",this.resolveButtonIcon="replay")},resolveClicked(e){e.preventDefault(),this.resolveFlag=!0},async submitButtonClicked(e){e.preventDefault();const t=this.$q.notify({message:"Updating...",position:"bottom-left",group:!1,timeout:0,spinner:!0});this.resolveFlag=!1,this.buttonLoading=!0,await this.changeIssueStatus(),this.setPageVariables(),this.buttonLoading=!1,t({icon:"done",spinner:!1,message:"Updated",timeout:1500})},async addComment(e){const t=this.$q.notify({message:"Updating...",position:"bottom-left",group:!1,timeout:0,spinner:!0});await this.sendComment({comment:e}),t({icon:"done",spinner:!1,message:"Updated",timeout:1500})}}),data(){return{pageLoaded:"",buttonLoading:!1,resolveButtonIcon:"",resolveButtonText:"",resolveFlag:!1}}},Q=O,N=(s("ec00"),s("b047")),j=s("eb85"),E=s("24e8"),P=s("f09f"),F=s("a370"),U=s("4b7e"),z=s("7f67"),M=Object(p["a"])(Q,i,a,!1,null,"73e61e56",null);t["default"]=M.exports;v()(M,"components",{QBtn:L["a"],QChip:N["a"],QSeparator:j["a"],QDialog:E["a"],QCard:P["a"],QCardSection:F["a"],QCardActions:U["a"]}),v()(M,"directives",{ClosePopup:z["a"]})},"92b5":function(e,t,s){"use strict";s("d164")},a599:function(e,t,s){},d164:function(e,t,s){},de87:function(e,t,s){"use strict";s("1b25")},ec00:function(e,t,s){"use strict";s("6bc9")},f2a2:function(e,t,s){"use strict";s("a599")}}]);