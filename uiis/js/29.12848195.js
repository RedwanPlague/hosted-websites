(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[29],{8889:function(e,i,t){"use strict";t.r(i);var l=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("q-page",{attrs:{padding:""}},[t("div",{staticClass:"text-h5 q-my-md"},[e._v("\n    Manage Roles\n    "),e.roleToEdit?t("q-btn",{attrs:{icon:e.viewing?"edit":"visibility",color:e.viewing?"primary":"black",flat:"",dense:""},on:{click:function(i){e.viewing=!e.viewing}}}):e._e()],1),t("div",{staticClass:"row q-col-gutter-md q-pb-sm"},[t("role-picker",{attrs:{classes:"col-6",label:"Role",required:"","allow-add-new":e.canCreate},on:{input:e.resetForm},model:{value:e.roleToEdit,callback:function(i){e.roleToEdit=i},expression:"roleToEdit"}})],1),e.roleToEdit?t("q-form",{staticClass:"row q-col-gutter-sm",on:{submit:e.updateRole,reset:e.resetForm}},[t("privilege-picker",{attrs:{classes:"col-12",label:"Privileges",multiple:"",readonly:e.viewing},model:{value:e.privileges,callback:function(i){e.privileges=i},expression:"privileges"}}),t("div",{staticClass:"col-12"},[t("q-btn",{attrs:{label:"Update",type:"submit",color:"primary",unelevated:""}}),t("q-btn",{attrs:{label:"Reset",type:"reset",color:"primary",flat:""}})],1)],1):e._e(),t("q-inner-loading",{attrs:{showing:e.roleListLoading}}),t("div",{staticStyle:{"min-height":"500px"}})],1)},r=[],a=t("ded3"),s=t.n(a),o=t("0fe9"),n=t("a49b"),d=t("88f5"),c=t("2f62"),p=t("b2c5"),u=t("c9d9"),g={name:"RoleManagement",title:"Manage Roles",components:{PrivilegePicker:n["a"],RolePicker:o["a"]},mixins:[d["a"]],data(){return{roleToEdit:null,privileges:[]}},computed:s()(s()(s()({},Object(c["d"])(["userHasPrivilege"])),Object(c["d"])("admin",["roleList","roleListLoading"])),{},{canCreate(){return this.userHasPrivilege(u["d"].ROLE_CREATION)},canUpdate(){return this.userHasPrivilege(u["d"].ROLE_UPDATE)}}),methods:{use(e){this.roleToEdit=e},updateRole(){this.callEditApi("/role/update/"+this.roleToEdit.value,{privileges:Object(p["a"])(this.privileges)},`Role '${this.roleToEdit.value}'`)},resetForm(){const e=this.roleList.find((e=>e._id===this.roleToEdit.value));this.privileges=e?e.privileges:null}}},v=g,m=t("2877"),b=t("9989"),h=t("9c40"),w=t("0378"),E=t("74f7"),f=t("eebe"),R=t.n(f),T=Object(m["a"])(v,l,r,!1,null,null,null);i["default"]=T.exports;R()(T,"components",{QPage:b["a"],QBtn:h["a"],QForm:w["a"],QInnerLoading:E["a"]})}}]);