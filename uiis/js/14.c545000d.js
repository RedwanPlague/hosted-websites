(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"1b03":function(e,t,s){},"8bee":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{attrs:{padding:""}},[s("div",{staticClass:"q-pa-md"},[s("q-card",{attrs:{bordered:""}},[s("q-card-section",[s("div",{staticClass:"text-h5"},[s("p",[e._v("Course Registration Applications")])])]),s("q-separator"),s("q-card-section",e._l(e.getUniqueAdvisors,(function(t){return s("q-list",e._b({key:t},"q-list",t,!1),[s("q-item",[s("q-table",{staticClass:"full-width",attrs:{title:e.getStudents.filter((function(e){return e.advisor._id===t}))[0].advisor.name,dense:"",bordered:"",data:e.getStudents.filter((function(e){return e.advisor._id===t})),columns:e.applicationColumns,"row-key":"id",selection:"multiple",selected:e.selected,separator:"cell"},on:{"update:selected":function(t){e.selected=t},"row-click":e.onRowClick}})],1)],1)})),1),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{staticClass:"bg-positive text-white",attrs:{label:"Approve"},on:{click:e.approve}}),s("q-btn",{staticClass:"bg-negative text-white",attrs:{label:"Reject"},on:{click:e.reject}})],1)],1),s("q-dialog",{attrs:{"full-width":""},model:{value:e.courseRegistrationInfoDialogBox,callback:function(t){e.courseRegistrationInfoDialogBox=t},expression:"courseRegistrationInfoDialogBox"}},[s("q-card",{attrs:{bordered:""}},[s("q-card-section",[s("div",{staticClass:"row q-gutter-lg"},[s("div",[s("div",{staticClass:"text-h5"},[e._v("Course Registration Information")]),s("br"),s("div",{staticClass:"text-subtitle2"},[s("p",[s("strong",[e._v("Student ID:")]),e._v(" "+e._s(e.getStudent.id)+"\n                ")]),s("p",[s("strong",[e._v("Name:")]),e._v(" "+e._s(e.getStudent.name)+"\n                ")]),s("p",[s("strong",[e._v("Level/Term:")]),e._v(" "+e._s(e.getStudent.level)+"/"+e._s(e.getStudent.term)+"\n                ")]),s("p",[s("strong",[e._v("Department:")]),e._v(" "+e._s(e.getStudent.department)+"\n                ")]),s("p",[s("strong",[e._v("Course Registration Status:")]),e._v(" "+e._s(e.getStudent.status)+"\n                ")])])]),s("q-space"),s("img",{staticClass:"profile-photo",attrs:{alt:"",src:"https://discourse.disneyheroesgame.com/uploads/default/original/3X/c/2/c23f54aea2065f106e4dbb8218d0ce2d7853351c.png"}})],1)]),s("q-separator"),s("br"),s("q-card-section",[s("q-table",{attrs:{title:"Courses Available",dense:"",bordered:"",data:e.courseRegistrations,columns:e.getRegistrationColumns,"row-key":"courseID",separator:"cell"}})],1),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"bg-secondary text-white",attrs:{label:"Back"}})],1)],1)],1)],1)])},o=[],a=s("ded3"),r=s.n(a),n=s("2f62"),c=s("758b"),l={name:"HeadCourseRegistrationPage",data(){return{courseRegistrations:[],courseRegistrationInfoDialogBox:!1,applicationColumns:[{name:"id",required:!0,label:"Student ID",align:"left",field:e=>e.id,format:e=>`${e}`,sortable:!0},{name:"name",align:"left",label:"Name",field:"name",sortable:!0},{name:"level",align:"left",label:"Level",field:"level",sortable:!0},{name:"term",align:"left",label:"Term",field:"term",sortable:!0}],selected:[]}},methods:r()(r()({},Object(n["c"])(["fetchStudents","generateUniqueAdvisors","fetchStudentProfileInfo","fetchCourseRegistrations"])),{},{generateCourseRegistrations(){this.courseRegistrations=[];for(let e=0;e<this.getCourseRegistrations.length;e++)this.courseRegistrations[e]={courseID:this.getCourseRegistrations[e].courseSession.course.courseID,syllabusID:this.getCourseRegistrations[e].courseSession.course.syllabusID,title:this.getCourseRegistrations[e].courseSession.course.title,credit:this.getCourseRegistrations[e].courseSession.course.credit,status:this.getCourseRegistrations[e].status}},async onRowClick(e,t){try{await this.fetchStudentProfileInfo(t.id),this.courseRegistrations=[],this.courseRegistrationInfoDialogBox=!0,await this.fetchCourseRegistrations({id:t.id,level:t.level,term:t.term}),this.generateCourseRegistrations()}catch(s){console.log(s)}},async approve(){try{if(0===this.selected.length)this.$q.notify({message:"No student selected.",position:"bottom-left",color:"warning",icon:"warning"});else{const e=this.$q.notify({message:"Approving applications.",position:"bottom-left",color:"info",group:!1,timeout:0,spinner:!0});await c["b"].patch("/teacher/head/registrations/approve",{_id:this.selected.map((e=>e.id))}),await c["b"].patch("/student/registrations/course_registered",{_id:this.selected.map((e=>e.id))}),await this.fetchStudents(),this.generateUniqueAdvisors(),this.selected=[],e({message:"Application approved.",color:"positive",icon:"done",timeout:1500,spinner:!1})}}catch(e){console.log(e)}},async reject(){try{if(0===this.selected.length)this.$q.notify({message:"No student selected.",position:"bottom-left",color:"warning",icon:"warning"});else{const e=this.$q.notify({message:"Rejecting applications back to advisors.",position:"bottom-left",color:"info",group:!1,timeout:0,spinner:!0});await c["b"].patch("/teacher/head/registrations/reject",{_id:this.selected.map((e=>e.id))}),await this.fetchStudents(),this.generateUniqueAdvisors(),this.selected=[],e({message:"Application rejected.",color:"positive",icon:"done",timeout:1500,spinner:!1})}}catch(e){console.log(e)}}}),computed:Object(n["d"])(["getStudents","getUniqueAdvisors","getStudent","getCourseRegistrations","getRegistrationColumns"]),async created(){try{await this.fetchStudents(),this.generateUniqueAdvisors()}catch(e){console.log(e)}}},d=l,u=(s("becd"),s("2877")),g=s("9989"),p=s("f09f"),h=s("a370"),f=s("eb85"),m=s("1c1c"),b=s("66e5"),v=s("eaac"),C=s("4b7e"),q=s("9c40"),R=s("24e8"),w=s("2c91"),_=s("7f67"),S=s("eebe"),y=s.n(S),I=Object(u["a"])(d,i,o,!1,null,"bdc42892",null);t["default"]=I.exports;y()(I,"components",{QPage:g["a"],QCard:p["a"],QCardSection:h["a"],QSeparator:f["a"],QList:m["a"],QItem:b["a"],QTable:v["a"],QCardActions:C["a"],QBtn:q["a"],QDialog:R["a"],QSpace:w["a"]}),y()(I,"directives",{ClosePopup:_["a"]})},becd:function(e,t,s){"use strict";s("1b03")}}]);