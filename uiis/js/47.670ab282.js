(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[47],{"49f1":function(a,l,e){"use strict";e.r(l);var t=function(){var a=this,l=a.$createElement,e=a._self._c||l;return e("q-page",{attrs:{padding:""}},[e("div",{staticClass:"text-h5 q-mb-md"},[a._v("\n    Halls\n  ")]),a.dataLoading?a._e():e("q-form",{on:{submit:a.updateHalls,reset:a.resetForm}},[a._l(a.halls,(function(l,t){return e("div",{key:t,staticClass:"row q-col-gutter-md q-mb-sm"},[e("q-input",{staticClass:"col-2",attrs:{label:"Hall ID",outlined:"",readonly:l.old,rules:[function(){return!!l.id||"Please Enter Hall ID"}]},model:{value:l.id,callback:function(e){a.$set(l,"id",e)},expression:"hall.id"}}),e("q-input",{staticClass:"col-5",attrs:{label:"Name",rules:[function(){return!!l.name||"Please Enter Name"}],outlined:"",readonly:l.viewing},model:{value:l.name,callback:function(e){a.$set(l,"name",e)},expression:"hall.name"}}),e("teacher-picker",{attrs:{classes:"col-4",label:"Provost",readonly:l.viewing,required:l.old},model:{value:l.provost,callback:function(e){a.$set(l,"provost",e)},expression:"hall.provost"}}),e("div",{staticClass:"col-1"},[l.old?e("q-btn",{attrs:{icon:l.viewing?"edit":"visibility",color:l.viewing?"primary":"black",flat:"",dense:""},on:{click:function(a){l.viewing=!l.viewing}}}):e("q-btn",{attrs:{icon:"delete",color:"primary",flat:"",dense:""},on:{click:function(l){return a.localRemoveHall(t)}}})],1)],1)})),a.canCreate?e("div",{staticClass:"row"},[e("div",{staticClass:"col-3"}),e("q-btn",{staticClass:"col-6",attrs:{color:"primary",outline:"",icon:"add",ripple:!1},on:{click:a.localAddHall}})],1):a._e(),e("div",{staticClass:"col-12 q-mt-lg"},[e("q-btn",{attrs:{label:"Update",type:"submit",color:"primary",unelevated:""}}),e("q-btn",{attrs:{label:"Reset",type:"reset",color:"primary",flat:""}})],1)],2),e("q-inner-loading",{attrs:{showing:a.dataLoading}})],1)},s=[],i=e("ded3"),n=e.n(i),o=e("dce8"),r=e("e92d"),c=e("7338"),d=e("88f5"),u=e("b2c5"),h=e("2f62"),p=e("c9d9"),m={name:"DeptManagement",title:"Manage Halls",components:{TeacherPicker:r["a"]},mixins:[c["a"],d["a"]],data(){return{halls:[],hallList:[],dataLoading:!1}},computed:n()(n()({},Object(h["d"])(["userHasPrivilege"])),{},{canCreate(){return this.userHasPrivilege(p["d"].HALL_CREATION)},canUpdate(){return this.userHasPrivilege(p["d"].HALL_UPDATE)}}),methods:{fetchHalls(){this.dataLoading=!0,Object(o["a"])("/hall/list",null,"Halls").then((a=>{this.dataLoading=!1,this.hallList=a.data,this.resetForm()})).catch((()=>{this.dataLoading=!1}))},localAddHall(){this.halls.push({id:null,name:null,provost:null,viewing:!1,old:!1})},localRemoveHall(a){this.halls.splice(a,1)},updateHalls(){this.halls.forEach(((a,l)=>{if(console.log(a),a.old){const e=this.hallList[l];e.name===a.name&&a.provost&&e.provost===a.provost.value||this.editHall(a)}else this.createHall(a)})),this.fetchHalls()},createHall(a){this.callCreateApi("/hall/create",{id:a.id,name:a.name,provost:Object(u["a"])(a.provost)},`${a.name} hall`)},editHall(a){this.callEditApi("/hall/update/"+a.id,{name:a.name,provost:Object(u["a"])(a.provost)},`${a.name} hall`)},resetForm(){this.halls=this.hallList.map((a=>n()(n()({},a),{},{viewing:!0,old:!0})))}},created(){this.fetchHalls()}},v=m,b=e("2877"),g=e("9989"),f=e("0378"),H=e("27f9"),w=e("9c40"),q=e("74f7"),L=e("eebe"),C=e.n(L),k=Object(b["a"])(v,t,s,!1,null,null,null);l["default"]=k.exports;C()(k,"components",{QPage:g["a"],QForm:f["a"],QInput:H["a"],QBtn:w["a"],QInnerLoading:q["a"]})}}]);