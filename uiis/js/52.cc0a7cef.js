(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[52],{"24cf":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{attrs:{padding:""}},[s("div",{staticClass:"q-pa-md"},[s("q-card",{attrs:{bordered:""}},[s("q-card-section",[s("div",{staticClass:"text-h5"},[s("p",[t._v("Registered")])])]),s("q-separator"),s("q-card-section",[s("div",{staticClass:"q-gutter-md"},t._l(t.getAdvisees.filter((function(t){return"registered"===t.status})),(function(e){return s("q-btn",t._b({key:e.id,staticClass:"bg-primary text-white",nativeOn:{click:function(s){t.selectedAdvisee=e,t.onAdviseeWithoutApprovalOptionClick()}}},"q-btn",e,!1),[t._v("\n            "+t._s(e.id)+"\n          ")])})),1)])],1),s("br"),s("q-card",{attrs:{bordered:""}},[s("q-card-section",[s("div",{staticClass:"text-h5"},[s("p",[t._v("Waiting for Head's Approval")])])]),s("q-separator"),s("q-card-section",[s("div",{staticClass:"q-gutter-sm"},t._l(t.getAdvisees.filter((function(t){return"waiting"===t.status})),(function(e){return s("q-btn",t._b({key:e.id,staticClass:"bg-primary text-white",nativeOn:{click:function(s){t.selectedAdvisee=e,t.onAdviseeWithoutApprovalOptionClick()}}},"q-btn",e,!1),[t._v("\n            "+t._s(e.id)+"\n          ")])})),1)])],1),s("br"),s("q-card",{attrs:{bordered:""}},[s("q-card-section",[s("div",{staticClass:"text-h5"},[s("p",[t._v("Waiting for Advisor's Approval")])])]),s("q-separator"),s("q-card-section",[s("div",{staticClass:"q-gutter-sm"},t._l(t.getAdvisees.filter((function(t){return"applied"===t.status})),(function(e){return s("q-btn",t._b({key:e.id,staticClass:"bg-primary text-white",nativeOn:{click:function(s){t.selectedAdvisee=e,t.onAdviseeWithApprovalOptionClick()}}},"q-btn",e,!1),[t._v("\n            "+t._s(e.id)+"\n          ")])})),1)])],1),s("br"),s("q-card",{attrs:{bordered:""}},[s("q-card-section",[s("div",{staticClass:"text-h5"},[s("p",[t._v("Not Applied for Registration")])])]),s("q-separator"),s("q-card-section",[s("div",{staticClass:"q-gutter-sm"},t._l(t.getAdvisees.filter((function(t){return"unregistered"===t.status})),(function(e){return s("q-btn",t._b({key:e.id,staticClass:"bg-primary text-white",nativeOn:{click:function(s){t.selectedAdvisee=e,t.onAdviseeWithoutApprovalOptionClick()}}},"q-btn",e,!1),[t._v("\n            "+t._s(e.id)+"\n          ")])})),1)])],1),s("q-dialog",{attrs:{"full-width":""},model:{value:t.adviseeWithApprovalOptionDialogBox,callback:function(e){t.adviseeWithApprovalOptionDialogBox=e},expression:"adviseeWithApprovalOptionDialogBox"}},[s("q-card",{attrs:{bordered:""}},[s("q-card-section",[s("div",{staticClass:"text-h5"},[t._v("Course Registration Information")]),s("br"),s("div",{staticClass:"text-subtitle2"},[s("p",[s("strong",[t._v("Student ID:")]),t._v(" "+t._s(t.getStudent.id)+"\n            ")]),s("p",[s("strong",[t._v("Name:")]),t._v(" "+t._s(t.getStudent.name)+"\n            ")]),s("p",[s("strong",[t._v("Level/Term:")]),t._v(" "+t._s(t.getStudent.level)+"/"+t._s(t.getStudent.term)+"\n            ")]),s("p",[s("strong",[t._v("Department:")]),t._v(" "+t._s(t.getStudent.department)+"\n            ")]),s("p",[s("strong",[t._v("Course Registration Status:")]),t._v(" "+t._s(t.getStudent.status)+"\n            ")])])]),s("q-separator"),s("br"),s("q-card-section",[s("q-table",{attrs:{title:"Courses Available",bordered:"",data:t.courseRegistrations,columns:t.getRegistrationColumns,"row-key":"courseID",separator:"cell"}})],1),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"bg-positive text-white",attrs:{label:"Approve"},on:{click:t.approve}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"bg-negative text-white",attrs:{label:"Reject"},on:{click:t.reject}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"bg-secondary text-white",attrs:{label:"Back"}})],1)],1)],1),s("q-dialog",{attrs:{"full-width":""},model:{value:t.adviseeWithoutApprovalOptionDialogBox,callback:function(e){t.adviseeWithoutApprovalOptionDialogBox=e},expression:"adviseeWithoutApprovalOptionDialogBox"}},[s("q-card",{attrs:{bordered:""}},[s("q-card-section",[s("div",{staticClass:"text-h5"},[t._v("Course Registration Information")]),s("br"),s("div",{staticClass:"text-subtitle2"},[s("p",[s("strong",[t._v("Student ID:")]),t._v(" "+t._s(t.getStudent.id)+"\n            ")]),s("p",[s("strong",[t._v("Name:")]),t._v(" "+t._s(t.getStudent.name)+"\n            ")]),s("p",[s("strong",[t._v("Level/Term:")]),t._v(" "+t._s(t.getStudent.level)+"/"+t._s(t.getStudent.term)+"\n            ")]),s("p",[s("strong",[t._v("Department:")]),t._v(" "+t._s(t.getStudent.department)+"\n            ")]),s("p",[s("strong",[t._v("Course Registration Status:")]),t._v(" "+t._s(t.getStudent.status)+"\n            ")])])]),s("q-separator"),s("br"),s("q-card-section",[s("q-table",{attrs:{title:"Courses Available",bordered:"",data:t.courseRegistrations,columns:t.getRegistrationColumns,"row-key":"courseID",separator:"cell"}})],1),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"bg-secondary text-white",attrs:{label:"Back"}})],1)],1)],1)],1)])},a=[],o=s("ded3"),r=s.n(o),n=s("2f62"),c=s("758b"),d={name:"AdviseeCourseRegistrationPage",data(){return{selectedAdvisee:{},courseRegistrations:[],adviseeWithApprovalOptionDialogBox:!1,adviseeWithoutApprovalOptionDialogBox:!1}},methods:r()(r()({},Object(n["c"])(["fetchAdvisees","fetchStudentProfileInfo","fetchCourseRegistrations"])),{},{generateCourseRegistrations(){this.courseRegistrations=[];for(let t=0;t<this.$store.getters.getCourseRegistrations.length;t++)this.courseRegistrations[t]={courseID:this.$store.getters.getCourseRegistrations[t].courseSession.course.courseID,syllabusID:this.$store.getters.getCourseRegistrations[t].courseSession.course.syllabusID,title:this.$store.getters.getCourseRegistrations[t].courseSession.course.title,credit:this.$store.getters.getCourseRegistrations[t].courseSession.course.credit,status:this.$store.getters.getCourseRegistrations[t].status}},async onAdviseeWithApprovalOptionClick(){try{await this.fetchStudentProfileInfo(this.selectedAdvisee.id),this.courseRegistrations=[],this.adviseeWithApprovalOptionDialogBox=!0,await this.fetchCourseRegistrations({id:this.selectedAdvisee.id,level:this.selectedAdvisee.level,term:this.selectedAdvisee.term}),this.generateCourseRegistrations()}catch(t){console.log(t)}},async onAdviseeWithoutApprovalOptionClick(){try{await this.fetchStudentProfileInfo(this.selectedAdvisee.id),this.courseRegistrations=[],this.adviseeWithoutApprovalOptionDialogBox=!0,await this.fetchCourseRegistrations({id:this.selectedAdvisee.id,level:this.selectedAdvisee.level,term:this.selectedAdvisee.term}),this.generateCourseRegistrations()}catch(t){console.log(t)}},async approve(){try{const t=this.$q.notify({message:"Forwarding application to Head.",position:"bottom-left",color:"info",group:!1,timeout:0,spinner:!0});await c["b"].patch("/teacher/advisor/registrations/"+this.getStudent.id+"/approve"),await this.fetchAdvisees(),t({message:"Application forwarded.",color:"positive",icon:"done",timeout:1500,spinner:!1})}catch(t){console.log(t)}},async reject(){try{const t=this.$q.notify({message:"Rejecting application.",position:"bottom-left",color:"info",group:!1,timeout:0,spinner:!0});await c["b"].patch("/teacher/advisor/registrations/"+this.getStudent.id+"/reject"),await c["b"].patch("/student/registrations/course_offered",{_id:this.getCourseRegistrations.map((t=>t._id))}),await this.fetchAdvisees(),t({message:"Application rejected.",color:"positive",icon:"done",timeout:1500,spinner:!1})}catch(t){console.log(t)}}}),computed:Object(n["d"])(["getAdvisees","getStudent","getCourseRegistrations","getRegistrationColumns"]),async created(){try{await this.fetchAdvisees()}catch(t){console.log(t)}}},l=d,p=s("2877"),u=s("9989"),v=s("f09f"),g=s("a370"),h=s("eb85"),b=s("9c40"),f=s("24e8"),_=s("eaac"),m=s("4b7e"),A=s("7f67"),C=s("eebe"),q=s.n(C),w=Object(p["a"])(l,i,a,!1,null,"098dfa72",null);e["default"]=w.exports;q()(w,"components",{QPage:u["a"],QCard:v["a"],QCardSection:g["a"],QSeparator:h["a"],QBtn:b["a"],QDialog:f["a"],QTable:_["a"],QCardActions:m["a"]}),q()(w,"directives",{ClosePopup:A["a"]})}}]);