(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[51],{e7ea:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{attrs:{padding:""}},[t.isPageLoaded?s("div",{staticClass:"q-pa-md"},[s("q-card",{attrs:{bordered:""}},[s("q-card-section",[s("div",{staticClass:"text-h5"},[t._v("\n          Course Registration Information\n\n          "),this.getCurrentSession.isRegistrationPeriodRunning?t._e():s("q-chip",{attrs:{color:"negative","text-color":"white"}},[t._v("\n            Course Registration Period is Over\n          ")])],1),s("br"),s("div",{staticClass:"text-subtitle2"},[s("p",[s("strong",[t._v("Student ID:")]),t._v(" "+t._s(t.getStudent.id)+"\n          ")]),s("p",[s("strong",[t._v("Name:")]),t._v(" "+t._s(t.getStudent.name)+"\n          ")]),s("p",[s("strong",[t._v("Level/Term:")]),t._v(" "+t._s(t.getStudent.level)+"/"+t._s(t.getStudent.term)+"\n          ")]),s("p",[s("strong",[t._v("Department:")]),t._v(" "+t._s(t.getStudent.department)+"\n          ")]),s("p",[s("strong",[t._v("Course Registration Status:")]),t._v(" "+t._s(t.getStudent.status)+"\n          ")])])]),s("q-separator"),s("br"),s("q-card-section",[s("div",{staticClass:"text-h5"},[t._v("Courses")]),s("br"),"unregistered"===this.getStudent.status?s("q-table",{attrs:{bordered:"",data:t.getAvailableCourseRegistrations,columns:t.getRegistrationColumns,"row-key":"courseID",selection:"multiple",selected:t.selected,separator:"cell"},on:{"update:selected":function(e){t.selected=e}}}):s("q-table",{attrs:{bordered:"",data:this.getAvailableCourseRegistrations,columns:t.getRegistrationColumns,"row-key":"courseID",separator:"cell"}})],1),"unregistered"===t.getStudent.status?s("q-card-actions",{attrs:{align:"right"}},[t.getCurrentSession.isRegistrationPeriodRunning?s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"bg-primary text-white",attrs:{label:"Submit"},on:{click:t.check}}):s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"bg-secondary text-white",attrs:{label:"Locked"},on:{click:t.check}})],1):t._e()],1)],1):t._e()])},a=[],n=s("ded3"),o=s.n(n),r=s("2f62"),d=s("758b"),c={name:"CourseRegistrationPage",data(){return{isPageLoaded:!1,selected:[]}},methods:o()(o()({},Object(r["c"])(["fetchStudentIDInfo","fetchStudentProfileInfo","fetchCourseRegistrations","generateAvailableCourseRegistrations","fetchCurrentSession"])),{},{async submit(){try{let t=0;for(let e=0;e<this.selected.length;e++)t+=this.selected[e].credit;if(t>=this.getCurrentSession.minimumCreditHourRequired){const t=this.$q.notify({message:"Submitting application.",position:"bottom-left",color:"info",group:!1,timeout:0,spinner:!0});await d["b"].patch("/student/registrations/status_applied"),await d["b"].patch("/student/registrations/course_applied",{_id:this.selected.map((t=>t._id))}),await this.fetchStudentProfileInfo(this.getID.id),await this.fetchCourseRegistrations({id:this.getStudent.id,level:this.getStudent.level,term:this.getStudent.term}),this.generateAvailableCourseRegistrations(),t({message:"Application submitted.",color:"positive",icon:"done",timeout:1500,spinner:!1})}else this.$q.notify({message:"Minimum course registration credit ("+this.getCurrentSession.minimumCreditHourRequired.toFixed(2)+") is not fulfilled. Try again.",position:"bottom-left",color:"negative",icon:"warning"})}catch(t){console.log(t)}},attempt(){this.$q.notify({message:"Course registration period is over. Contact your advisor.",position:"bottom-left",color:"negative",icon:"warning"})},async check(){try{this.getCurrentSession.isRegistrationPeriodRunning?await this.submit():this.attempt(),this.selected=[]}catch(t){console.log(t)}}}),computed:Object(r["d"])(["getID","getStudent","getCourseRegistrations","getAvailableCourseRegistrations","getRegistrationColumns","getCurrentSession"]),async created(){try{this.$q.loading.show({delay:100,message:"Loading...",messageColor:"white"}),await this.fetchStudentIDInfo(),await this.fetchStudentProfileInfo(this.getID.id),await this.fetchCourseRegistrations({id:this.getStudent.id,level:this.getStudent.level,term:this.getStudent.term}),this.generateAvailableCourseRegistrations(),await this.fetchCurrentSession(),this.$q.loading.hide(),this.isPageLoaded=!this.isPageLoaded}catch(t){console.log(t)}}},l=c,u=s("2877"),g=s("9989"),h=s("f09f"),p=s("a370"),m=s("b047"),v=s("eb85"),b=s("eaac"),C=s("4b7e"),f=s("9c40"),S=s("7f67"),_=s("eebe"),w=s.n(_),R=Object(u["a"])(l,i,a,!1,null,"53c41a40",null);e["default"]=R.exports;w()(R,"components",{QPage:g["a"],QCard:h["a"],QCardSection:p["a"],QChip:m["a"],QSeparator:v["a"],QTable:b["a"],QCardActions:C["a"],QBtn:f["a"]}),w()(R,"directives",{ClosePopup:S["a"]})}}]);