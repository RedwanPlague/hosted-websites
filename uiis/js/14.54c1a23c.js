(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"288b":function(e,t,s){"use strict";s("bba4")},"3d43":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"container"},[e.loading?s("div"):s("div",{staticClass:"q-pa-sm"},[s("div",{staticClass:"row justify-center q-mb-md"},[s("h6",{staticClass:"q-mb-sm"},[e._v("\n        "+e._s(e.info.courseID+" - "+e.info.courseTitle)+"\n      ")])]),s("div",[s("div",{staticClass:"row justify-center"},[s("q-btn-toggle",{attrs:{glossy:"",options:e.labels,"no-caps":""},model:{value:e.slide,callback:function(t){e.slide=t},expression:"slide"}})],1),s("q-carousel",{attrs:{"transition-prev":"slide-right","transition-next":"slide-left",animated:"",draggable:"false","control-color":"primary",height:"100%"},model:{value:e.slide,callback:function(t){e.slide=t},expression:"slide"}},[e._l(e.allTeacherInfo,(function(t,a){return s("q-carousel-slide",{key:a,staticClass:"column no-wrap flex-center",attrs:{name:t.fakeTeacherID}},[s("div",{staticClass:"text-center"},[s("q-table",{staticClass:"table",attrs:{title:t.teacherName,data:t.deho,columns:t.mathas,separator:"cell","row-key":"studentID","selected-rows-label":e.getSelectedString,selection:"multiple",selected:e.selected,pagination:e.initialPagination,"table-header-class":"bg-primary text-white"},on:{"update:selected":function(t){e.selected=t}}}),s("IssueForm",{attrs:{details:t.issueDetails}})],1)])})),e._l(e.allTfInfo,(function(t,a){return s("q-carousel-slide",{key:a,staticClass:"column no-wrap flex-center",attrs:{name:t.fakeExaminerID}},[s("div",{staticClass:"text-center"},[s("q-table",{staticClass:"table",attrs:{title:t.examinerName,data:t.deho,columns:t.mathas,separator:"cell",padding:"","row-key":"studentID","selected-rows-label":e.getSelectedString,selection:"multiple",selected:e.selected,pagination:e.initialPagination,"table-header-class":"bg-primary text-white"},on:{"update:selected":function(t){e.selected=t}}}),s("IssueForm",{attrs:{details:t.issueDetails}})],1)])}))],2),s("div",{staticClass:"row justify-center"},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:!(!e.canEdit||e.hasForwarded||e.barse),expression:"!(!canEdit || hasForwarded || barse)"}],staticClass:"submit-btn q-mt-sm",attrs:{color:"primary",label:"Forward to department head"},on:{click:e.forwardResult}})],1)],1)])])},i=[],n=s("ded3"),l=s.n(n),r=(s("ddb0"),s("2f62")),o=s("758b"),c=(s("bc78"),{name:"ScrutinizerTable",data(){return{canEdit:!0,slide:null,loading:!0,selected:[],initialPagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:null},barse:!1}},components:{IssueForm:()=>Promise.all([s.e(0),s.e(4)]).then(s.bind(null,"103e"))},methods:l()(l()({setBarse(e){this.barse=e,console.log(this.barse)},getSelectedString(){return 0===this.selected.length?"":`${this.selected.length} students${this.selected.length>1?"s":""} selected`}},Object(r["c"])("scrutinizer",["fillSingleCourse"])),{},{async forwardResult(){this.canEdit=!1,await o["b"].put(`/teacher/scrutinizer/${this.info.courseID}/${this.currentSession}/approve`),this.$store.commit("scrutinizer/mutHasForwarded"),console.log(this.hasForwarded),this.$q.notify({icon:"done",message:"Result Forwarded to Department Head",position:"bottom-left"})}}),computed:l()(l()({},Object(r["d"])("scrutinizer",{info:"currentCourseInfo",attTotal:"attTotal",attStudent:"attStudent",evalTotal:"evalTotal",evalStudent:"evalStudent",tfTotal:"tfTotal",tfStudent:"tfStudent",hasForwarded:"hasForwarded",currentSession:"currentSession"})),{},{allCompleted(){console.log(this.info);for(const e of this.info.students){for(const t of this.info.teachers){if("NA"===this.attStudent(t.teacher,e.student.id))return!1;for(const s of t.evalDescriptions)if("NA"===this.evalStudent(t.teacher,s.evalID,e.student.id))return!1}for(const t of this.info.examiners)if("NA"===this.tfStudent(t.teacher,t.part,e.student.id))return!1}return!0},allTeacherInfo(){const e=[];for(const t of this.info.teachers){const s=[],a=[],i={name:"studentID",label:"Student ID",field:"studentID",sortable:!0,align:"left"};s.push(i);const n={name:"attendance",label:`Attendance Count (${this.attTotal(t.teacher)})`,field:"attendance",sortable:!0,align:"left"};s.push(n);for(const e of t.evalDescriptions){const a={name:`eval_${e.evalID}`,label:`Eval-${e.evalID} (${this.evalTotal(t.teacher,e.evalID)})`,field:`eval_${e.evalID}`,sortable:!0,align:"left"};s.push(a)}for(const e of this.info.students){const s={};s["studentID"]=e.student.id,s["attendance"]=this.attStudent(t.teacher,e.student.id);for(const a of t.evalDescriptions)s[`eval_${a.evalID}`]=this.evalStudent(t.teacher,a.evalID,e.student.id);a.push(s)}const l=this.info.names[t.teacher],r="teacher-"+t.teacher,o={courseID:this.info.courseID,evalType:"course-eval",part:t.part,evalOwner:t.teacher,evalOwnerName:this.info.names[t.teacher],allStudentSelected:this.selected.length===this.info.students.length,students:this.selected.map((e=>e.studentID)),teachers:["t1","t2"]};e.push({fakeTeacherID:r,teacherName:l,mathas:s,deho:a,issueDetails:o})}return e},allTfInfo(){const e=[];for(const t of this.info.examiners){const s=[],a=[],i={name:"studentID",label:"Student ID",field:"studentID",sortable:!0,align:"left"};s.push(i);const n={name:"mark",label:"Mark",field:"mark",sortable:!0,align:"left"};s.push(n);for(const e of this.info.students){const s={};s["studentID"]=e.student.id,s["mark"]=this.tfStudent(t.teacher,t.part,e.student.id),a.push(s)}const l=this.info.names[t.teacher],r="examiner-"+t.teacher,o={courseID:this.info.courseID,evalType:"term-final-eval",part:t.part,evalOwner:t.teacher,evalOwnerName:this.info.names[t.teacher],allStudentSelected:this.selected.length===this.info.students.length,students:this.selected.map((e=>e.studentID)),teachers:["t1","t2"]};e.push({fakeExaminerID:r,examinerName:l,mathas:s,deho:a,issueDetails:o})}return e},labels(){const e=this.info.teachers.map((e=>({label:this.info.names[e.teacher],value:"teacher-"+e.teacher}))),t=this.info.examiners.map((e=>({label:`Term Final - Part ${e.part}`,value:"examiner-"+e.teacher})));return e.push(...t),e}}),watch:{async"$route.params"(e,t){this.loading=!0,this.$route.params.courseID&&(this.$store.commit("scrutinizer/mutCurCourse",this.$route.params.courseID),this.$q.loading.show({delay:100}),await this.$store.dispatch("scrutinizer/fillSingleCourse"),this.loading=!1,this.$q.loading.hide())},slide(e){this.selected=[]}},async created(){this.loading=!0,this.allCourses&&0!==this.allCourses.length||await this.$store.dispatch("scrutinizer/fillCourses"),this.$store.commit("scrutinizer/mutCurCourse",this.$route.params.courseID),this.$q.loading.show({delay:100}),await this.$store.dispatch("scrutinizer/fillSingleCourse"),this.loading=!1,this.$q.loading.hide(),this.labels.length>0&&(this.slide=this.labels[0]["value"]),this.initialPagination.rowsPerPage=this.info.students.length}}),d=c,u=(s("288b"),s("2877")),h=s("9989"),f=s("6a67"),m=s("880c"),p=s("62cd"),b=s("eaac"),g=s("9c40"),v=s("eebe"),w=s.n(v),D=Object(u["a"])(d,a,i,!1,null,"98e544b8",null);t["default"]=D.exports;w()(D,"components",{QPage:h["a"],QBtnToggle:f["a"],QCarousel:m["a"],QCarouselSlide:p["a"],QTable:b["a"],QBtn:g["a"]})},bba4:function(e,t,s){}}]);