(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[42],{d32c:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{attrs:{padding:""}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-6 text-h5 q-my-md"},[e._v("\n      "+e._s(e.label)+" Fine\n      "),e.status===e.DUE_STATUS.PENDING?n("q-btn",{attrs:{icon:e.viewing?"edit":"visibility",color:e.viewing?"primary":"black",flat:"",dense:""},on:{click:function(t){e.viewing=!e.viewing}}}):e._e()],1),n("div",{staticClass:"col-6"},[n("q-btn",{staticClass:"q-mt-md float-right",attrs:{icon:"delete",flat:"",color:"red"},on:{click:e.deleteFine}},[n("q-tooltip",{attrs:{"content-style":"font-size: 1em; background-color: red"}},[e._v("delete this fine")])],1)],1)]),e.fineType?n("q-form",{staticClass:"row q-col-gutter-md",on:{submit:e.updateFine,reset:e.resetForm}},[n("q-select",{staticClass:"col-6",attrs:{label:"Fine Type",outlined:"",readonly:"",options:e.fineOptions,rules:[function(){return!!e.fineType||"Please Select Fine Type"}]},model:{value:e.fineType,callback:function(t){e.fineType=t},expression:"fineType"}}),n("q-input",{staticClass:"col-6",attrs:{label:"Student ID",outlined:"",readonly:"",rules:[function(){return!!e.issuedTo||"Please Enter Student ID"}]},model:{value:e.issuedTo,callback:function(t){e.issuedTo=t},expression:"issuedTo"}}),n("q-input",{staticClass:"col-6",attrs:{label:"Amount",type:"number",min:"0",outlined:"",readonly:e.viewing,rules:[function(){return!!e.amount||"Please Enter Fine Amount"},e.noNegative(e.amount)]},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}}),n("q-input",{staticClass:"col-6",attrs:{label:"Deadline",outlined:"",readonly:e.viewing,mask:"date",rules:["date"]},scopedSlots:e._u([e.viewing?null:{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{model:{value:e.deadline,callback:function(t){e.deadline=t},expression:"deadline"}},[n("div",{staticClass:"row items-center justify-end"},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!0),model:{value:e.deadline,callback:function(t){e.deadline=t},expression:"deadline"}}),n("q-input",{staticClass:"col-6",attrs:{label:"Delay Fine "+(e.fineType===e.FINE_TYPES.LIBRARY_FINE?"(Per Day)":""),type:"number",min:"0",outlined:"",readonly:e.viewing,rules:[function(){return!!e.delayFine||"Please Enter Delay Fine"},e.noNegative(e.delayFine)]},model:{value:e.delayFine,callback:function(t){e.delayFine=t},expression:"delayFine"}}),n("q-input",{staticClass:"col-6",attrs:{label:"Status",outlined:"",readonly:"",rules:[function(){return!!e.status||"Please Assign Status"}]},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}}),n("q-input",{staticClass:"col-12",attrs:{label:"Description"+(e.descTooLong?" ("+e.description.length+"/"+e.descLimit+")":""),outlined:"",readonly:e.viewing,autogrow:"",rules:[function(){return!!e.description||"Please provide a reason for this Fine"},function(){return!e.descTooLong||"Maximum "+e.descLimit+" characters allowed"}]},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),e.status!==e.DUE_STATUS.PENDING||e.viewing?e._e():n("div",{staticClass:"col-12"},[n("q-btn",{attrs:{label:"Update",color:"primary",unelevated:"",loading:e.editLoading},on:{click:e.updateFine}}),n("q-btn",{attrs:{label:"Reset",color:"primary",flat:""},on:{click:e.resetForm}})],1)],1):e._e()],1)},a=[],l=(n("e01a"),n("5319"),n("c9d9")),s=n("88f5"),o=n("0286"),r=n("6308"),c={name:"FineEdit",title:"Edit Fines",mixins:[s["a"]],data(){return{fineType:null,issuedTo:null,amount:null,deadline:null,delayFine:null,status:null,description:null,descLimit:200,FINE_TYPES:l["c"],DUE_STATUS:l["a"],fineOptions:r["b"]}},computed:{descTooLong(){return!!this.description&&this.description.length>this.descLimit},fineID(){return this.$route.params.fineID}},methods:{noNegative:o["c"],updateFine(){this.callEditApi("/fine/update/"+this.fineID,{amount:this.amount,deadline:new Date(this.deadline),delayFine:this.delayFine,description:this.description},"Fine").catch((()=>{}))},deleteFine(){this.$adminAPI.delete("/fine/delete/"+this.fineID).then((()=>{this.$router.replace({name:"AdminFineSearchPage"})})).catch((()=>{this.$q.notify({message:"Failed to delete fine, Try Again",type:"negative"})}))},resetForm(){this.loadOldDataIntoForm()}},created(){this.fetchOldData("/fine/get/"+this.fineID,{},"Fine").catch((()=>{}))}},d=c,u=n("2877"),p=n("9989"),m=n("9c40"),f=n("05c0"),y=n("0378"),v=n("ddd8"),b=n("27f9"),h=n("0016"),F=n("7cbe"),g=n("52ee"),T=n("7f67"),w=n("eebe"),q=n.n(w),D=Object(u["a"])(d,i,a,!1,null,null,null);t["default"]=D.exports;q()(D,"components",{QPage:p["a"],QBtn:m["a"],QTooltip:f["a"],QForm:y["a"],QSelect:v["a"],QInput:b["a"],QIcon:h["a"],QPopupProxy:F["a"],QDate:g["a"]}),q()(D,"directives",{ClosePopup:T["a"]})}}]);