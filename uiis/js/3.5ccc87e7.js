(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"34ae":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"container"},[s("div",{staticClass:"column items-center"},[s("h6",[e._v("Current Session: "+e._s(e.currentSession))]),s("q-table",{staticClass:"table",attrs:{title:"Incomplete Courses",data:e.incompleteCourses,columns:e.columns,"row-key":"courseID","table-header-class":"bg-primary text-white",separator:"cell"}}),"eco"!=e.ke?s("q-table",{staticClass:"table",attrs:{title:"Arrived Courses",data:e.checkingCourses,columns:e.columns,"row-key":"courseID",separator:"cell","selected-rows-label":e.getSelectedString,selection:"multiple",selected:e.selected,"table-header-class":"bg-primary text-white"},on:{"update:selected":function(t){e.selected=t},"row-click":e.onRowClick}}):s("q-table",{staticClass:"table",attrs:{title:"Arrived Courses",data:e.checkingCourses,columns:e.columns,"row-key":"courseID",separator:"cell","table-header-class":"bg-primary text-white"},on:{"row-click":e.onRowClick}}),s("q-table",{staticClass:"table",attrs:{title:"Forwarded Courses",data:e.forwardedCourses,columns:e.columns,"row-key":"courseID",separator:"cell","table-header-class":"bg-primary text-white"},on:{"row-click":e.onRowClick}}),"eco"!=e.ke?s("div",{staticClass:"row justify-center"},[s("q-btn",{staticClass:"submit-btn q-mt-xl",attrs:{color:"primary",label:e.forwardLabel,disable:0===e.selected.length,"no-caps":""},on:{click:function(t){e.submitting=!0}}}),s("q-dialog",{model:{value:e.submitting,callback:function(t){e.submitting=t},expression:"submitting"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center"},[s("span",{staticClass:"q-ml-sm"},[e._v("Are you sure to submit?")])]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No",color:"primary"}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"yes",color:"primary"},on:{click:e.forwardResults}})],1)],1)],1)],1):e.resultPublished||0!==e.incompleteCourses.length?e._e():s("div",{staticClass:"row justify-center"},[s("q-btn",{staticClass:"submit-btn q-mt-xl",attrs:{color:"primary",label:"Publish Results","no-caps":""},on:{click:function(t){e.submitting=!0}}}),s("q-dialog",{model:{value:e.submitting,callback:function(t){e.submitting=t},expression:"submitting"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center"},[s("span",{staticClass:"q-ml-sm publish-text"},[e._v("Are you sure to publish results?")])]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No",color:"primary"}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"yes",color:"primary"},on:{click:e.publishResults}})],1)],1)],1)],1)],1)])},i=[],a=s("ded3"),o=s.n(a),l=(s("ddb0"),s("2f62")),c=s("758b"),n={name:"ScrutinizerPage",components:{},props:{ke:{type:String,required:!0}},data(){return{submitting:!1,columns:[{name:"courseID",label:"CourseID",field:"courseID",required:!0,align:"left",sortable:!0},{name:"courseTitle",label:"Course Title",field:"courseTitle",required:!0,align:"left",sortable:!0}],selected:[]}},methods:o()(o()({},Object(l["c"])("scrutinizer",["fillCourses","fillSingleCourse"])),{},{async onRowClick(e,t){this.$router.push({name:`${this.ke}-course-page`,params:{courseID:t.courseID},props:{ke:this.ke}})},async toiri(){this.selected=[],this.$store.commit("scrutinizer/mutKe",this.ke),this.$q.loading.show({delay:100}),await this.$store.dispatch("scrutinizer/fillResPublished"),await this.$store.dispatch("scrutinizer/fillCurrentSession"),await this.$store.dispatch("scrutinizer/fillCourses"),this.$q.loading.hide()},getSelectedString(){return 0===this.selected.length?"":`${this.selected.length} course${this.selected.length>1?"s":""} selected`},porerjon(){return"head"===this.ke?"ECO":"scrutinizer"===this.ke?"Gradesheet Preparer":"internal"===this.ke?"Department Head":"Janina"},async forwardResults(){const e=this.$q.notify({spinner:!0,message:"Forwarding",group:!1,timeout:0,position:"bottom-left"});for(const t of this.selected)await c["b"].put(`/teacher/${this.ke}/${t.courseID}/${this.currentSession}/approve`);e({icon:"done",message:`Result Forwarded to ${this.porerjon()}`,position:"bottom-left",spinner:!1,timeout:1500}),await this.toiri()},async publishResults(){const e=this.$q.notify({spinner:!0,message:"Publishing",group:!1,timeout:0,position:"bottom-left"});await c["b"].put(`/teacher/${this.ke}/publish`),e({icon:"done",message:"Result published!",position:"bottom-left",spinner:!1,timeout:1500}),await this.toiri()}}),computed:o()(o()({},Object(l["d"])("scrutinizer",["currentSession","allCourses","resultPublished"])),{},{currentCourse:{get(){return this.$store.getters["scrutinizer/currentCourse"]},set(e){this.$store.commit("scrutinizer/mutCurCourse",e)}},incompleteCourses(){return this.allCourses.filter((e=>!1===e.prevDone))},checkingCourses(){return this.allCourses.filter((e=>!0===e.prevDone&&!1===e.hasForwarded))},forwardedCourses(){return this.allCourses.filter((e=>!0===e.hasForwarded))},forwardLabel(){return`Forward to ${this.porerjon()}`}}),watch:{async"$route.params"(e,t){await this.toiri()}},async created(){await this.toiri()}},u=n,p=(s("bfe2"),s("2877")),d=s("9989"),m=s("eaac"),b=s("9c40"),h=s("24e8"),w=s("f09f"),g=s("a370"),f=s("4b7e"),C=s("7f67"),k=s("eebe"),q=s.n(k),y=Object(p["a"])(u,r,i,!1,null,"484144ea",null);t["default"]=y.exports;q()(y,"components",{QPage:d["a"],QTable:m["a"],QBtn:b["a"],QDialog:h["a"],QCard:w["a"],QCardSection:g["a"],QCardActions:f["a"]}),q()(y,"directives",{ClosePopup:C["a"]})},bfe2:function(e,t,s){"use strict";s("f550")},f550:function(e,t,s){}}]);