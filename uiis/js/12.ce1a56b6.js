(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"98bb":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{attrs:{padding:""}},[a("div",{staticClass:"text-h5 q-mb-md"},[e._v("\n    Departments\n  ")]),e.dataLoading?e._e():a("q-form",{on:{submit:e.updateDepartments,reset:e.resetForm}},[e._l(e.departments,(function(t,n){return a("div",{key:n,staticClass:"row q-col-gutter-md q-mb-sm"},[a("q-input",{staticClass:"col-2",attrs:{label:"Department ID",outlined:"",readonly:t.old,rules:[function(){return!!t.id||"Please Enter Department ID"}]},model:{value:t.id,callback:function(a){e.$set(t,"id",a)},expression:"dept.id"}}),a("q-input",{staticClass:"col-5",attrs:{label:"Name",rules:[function(){return!!t.name||"Please Enter Name"}],outlined:"",readonly:t.viewing},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"dept.name"}}),a("teacher-picker",{attrs:{classes:"col-4",label:"Head",readonly:t.viewing,required:t.old},model:{value:t.head,callback:function(a){e.$set(t,"head",a)},expression:"dept.head"}}),a("div",{staticClass:"col-1"},[t.old?a("q-btn",{attrs:{icon:t.viewing?"edit":"visibility",color:t.viewing?"primary":"black",flat:"",dense:""},on:{click:function(e){t.viewing=!t.viewing}}}):a("q-btn",{attrs:{icon:"delete",color:"primary",flat:"",dense:""},on:{click:function(t){return e.localRemoveDepartment(n)}}})],1)],1)})),a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"}),a("q-btn",{staticClass:"col-6",attrs:{color:"primary",outline:"",icon:"add",ripple:!1},on:{click:e.localAddDepartment}})],1),a("div",{staticClass:"col-12 q-mt-lg"},[a("q-btn",{attrs:{label:"Update",type:"submit",color:"primary",unelevated:""}}),a("q-btn",{attrs:{label:"Reset",type:"reset",color:"primary",flat:""}})],1)],2),a("q-inner-loading",{attrs:{showing:e.dataLoading}})],1)},i=[],s=a("ded3"),r=a.n(s),d=a("dce8"),l=a("e92d"),o=a("7338"),c=a("88f5"),m=a("b2c5"),p={name:"DeptManagement",components:{TeacherPicker:l["a"]},mixins:[o["a"],c["a"]],data(){return{departments:[],deptList:[],dataLoading:!1}},methods:{fetchDepartments(){this.dataLoading=!0,Object(d["a"])("/department/list",null,"Departments").then((e=>{this.dataLoading=!1,this.deptList=e.data,this.resetForm()})).catch((()=>{this.dataLoading=!1}))},localAddDepartment(){this.departments.push({id:null,name:null,head:null,viewing:!1,old:!1})},localRemoveDepartment(e){this.departments.splice(e,1)},updateDepartments(){this.departments.forEach(((e,t)=>{if(e.old){const a=this.deptList[t];a.name===e.name&&e.head&&a.head===e.head.value||this.editDepartment(e)}else this.createDepartment(e)})),this.fetchDepartments()},createDepartment(e){this.callCreateApi("/department/create",{id:e.id,name:e.name,head:Object(m["a"])(e.head)},`${e.id} department`)},editDepartment(e){this.callEditApi("/department/update/"+e.id,{name:e.name,head:Object(m["a"])(e.head)},`${e.id} department`)},resetForm(){this.departments=this.deptList.map((e=>r()(r()({},e),{},{viewing:!0,old:!0})))}},created(){this.fetchDepartments()}},u=p,h=a("2877"),b=a("9989"),v=a("0378"),f=a("27f9"),g=a("9c40"),D=a("74f7"),w=a("eebe"),q=a.n(w),k=Object(h["a"])(u,n,i,!1,null,null,null);t["default"]=k.exports;q()(k,"components",{QPage:b["a"],QForm:v["a"],QInput:f["a"],QBtn:g["a"],QInnerLoading:D["a"]})}}]);