(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"897a":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"q-pa-sm column items-center"},[e("h6",[t._v("\n    "+t._s(t.info.courseID+" ("+t.info.courseTitle+") - Part "+t.info.part)+"\n  ")]),e("q-checkbox",{attrs:{label:"Edit",disable:!t.info.hasEditAccess},model:{value:t.canEdit,callback:function(s){t.canEdit=s},expression:"canEdit"}}),e("q-markup-table",[e("thead",[e("tr",[e("th",[t._v("Student ID")]),e("th",[t._v("Marks ("+t._s(t.info.totalMarks)+")")])])]),e("tbody",t._l(t.info.students,(function(s){return e("tr",{key:s.studentID},[e("td",{staticStyle:{align:"center"}},[t._v(t._s(s.studentID))]),e("td",{staticStyle:{align:"center"}},[e("input",{staticStyle:{"text-align":"center"},attrs:{type:"number",disabled:!t.canEdit},domProps:{value:s.mark},on:{change:function(e){return t.updateMarks(e,s.studentID)}}})])])})),0)]),e("div",{},[e("q-btn",{staticClass:"q-ma-md",attrs:{color:"primary",label:"Save",disable:!t.info.hasEditAccess},on:{click:t.saveMarks}}),e("q-btn",{staticClass:"q-ma-md",attrs:{color:"primary",label:"Submit",disable:!t.info.hasEditAccess},on:{click:t.submitMarks}})],1)],1)},n=[],o=e("ded3"),i=e.n(o),r=e("2f62"),c=e("758b"),l={name:"ExaminerTable",data(){return{canEdit:!1,probRolls:[]}},methods:{updateMarks(t,s){this.$store.commit("examiner/mutSingleMark",{studentID:s,mark:Number(t.target.value)})},async uploadMarks(t){const s=this.info.courseID,e=this.currentSession,a=this.info.part;if(this.probRolls=[],this.info.students.forEach((t=>{console.log(t.studentID),console.log(t.mark),console.log(this.info.totalMarks),(t.mark<0||t.mark>this.info.totalMarks)&&this.probRolls.push(t.studentID)})),console.log(this.probRolls),this.probRolls.length)return this.$q.notify({icon:"error",message:`Please recheck the marks of ${this.probRolls.join()}!`,position:"bottom-left",actions:[{label:"Dismiss",color:"yellow",handler:()=>{}}]}),!1;const n=this.info.students.map((t=>({studentID:t.studentID,mark:t.mark?t.mark:null}))),o=await c["b"].put(`teacher/examiner/${s}/${e}/${t}`,{part:a,students:n});console.log(o);const i="save"===t?"saved!":"forwarded!";return this.$q.notify({icon:"done",message:i,position:"bottom-left"}),!0},async saveMarks(){await this.uploadMarks("save")},async submitMarks(){const t=await this.uploadMarks("forward");t&&(this.canEdit=!1,this.$store.commit("examiner/mutHasEditAccess"))}},computed:i()({},Object(r["c"])("examiner",{info:"currentCourseInfo",currentSession:"currentSession"}))},u=l,d=e("2877"),m=e("8f8e"),b=e("2bb1"),h=e("9c40"),p=e("eebe"),f=e.n(p),k=Object(d["a"])(u,a,n,!1,null,"2ac4b21a",null);s["default"]=k.exports;f()(k,"components",{QCheckbox:m["a"],QMarkupTable:b["a"],QBtn:h["a"]})}}]);